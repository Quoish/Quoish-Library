#组合数学 #概率论
# 有序问题和排列数
n个人排入m个位置的方法数$A_n^m=n\cdot(n-1)\cdot(n-2)\cdots(n-m)$
阶乘表示$A_m^n=\frac{n!}{m!}$
# 无序问题和组合数
从n个人中选择m个的方法数$C_n^m=\frac{n\cdot(n-1)\cdot(n-2)\cdots(n-m+1)}{m\cdot(m-1)\cdot(m-2)\cdots2\cdot1}=\frac{A_n^m}{A_m^m}$
阶乘和二项式表示$C_n^m=\binom{n}{m}=\frac{n!}{(n-m)!m!}$
# 循环排序问题
n个人有序坐在圆桌旁，求排序的方法数：
1. 先确定一个人的位置
2. 剩下的人放在这个人的顺时针方向后有序排列，方法数即$(n-1)!$
# “至少一个”问题和容斥原理
$P(恰好发生k次)=P(至少发生k次)-P(至少发生k+1次)$
## 容斥原理
- 二元的情况
$$
P(A+B)=P(A)+P(B)-P(AB)
$$
- 三元的情况
$$
P(A+B+C)=P(A)+P(B)+P(C)-P(AB)-P(BC)-P(CA)+P(ABC)
$$
- $n$元的情况
$$
P(\bigcup_{i=1}^{n}A_n)=\sum_{i=1}^{n}P(A_i)-\sum_{1\leq i < j \leq n}P(A_iA_j)+\sum_{1\leq i < j < k \leq n}P(A_iA_jA_k)-\cdots+(-1)^{n-1}P(A_1A_2\cdots A_n)
$$
## 等集合的容斥原理
当$P(A_1)=P(A_2)=\cdots P(A_n)$时：
$$
P(\bigcup_{i=1}^{n}A_n)=\binom{n}{1}P(A_1)-\binom{n}{2}P(A_1A_2)+\binom{n}{3}P(A_1A_2A_3)-\cdots+(-1)^{n-1}\binom{n}{n}P(A_1A_2\cdots A_n)
$$
# 错排问题
有n张信封要投入n个信箱,每张信封都只有一个目标信箱，刚好全部信都投入错误的信箱的可能方法有：【全错位排列公式】
$$
D_n=n!-\frac{n!}{1!}+\frac{n!}{2!}-\frac{n!}{3!}+\cdots+(-1)^{n-1}\frac{n!}{n!}
$$
## 全错位排列公式的递推形式
$$D_n=(n-1)(D_{n-1}+D_{n-2}),其中D_1=0,D_2=1$$
## 全错位排列的概率
$$\frac{D_n}{A_n^n}=1-\frac{1}{1!}+\frac{1}{2!}-\frac{1}{3!}+\cdots+\frac{(-1)^{n-1}}{n!}=\frac{1}{e}(当n\to\infty)$$
# 单词排序问题和多项式系数
## 消排序法
考察一个长度为$N$同时包含了$k$个不同字母的单词，
设第1个字母出现了$n_1$次,第2个字母出现了$n_2$次，……，第$k$个字母出现了$n_k$次，其中$n_1+n_2+\cdots+n_k=N$，
则利用这些字母可以构造出的单词数为：$$\frac{N!}{n_1!n_2!\cdots n_k!}$$
## 多项式系数
设$N$是一个正整数，有$n_1+n_2+\cdots+n_k=N$，称$$\binom{N}{n_1,n_2,\cdots,n_k}=\frac{N!}{n_1!n_2!\cdots n_k!}$$为多项式系数
### 三元多项式定理
$$(x+y+z)^N=\sum_{0\leq n_1,n_2,n_3\leq N且\sum n_i=N}\binom{N}{n_1,n_2,n_3}x^{n_1}y^{n_2}z^{n_3}$$
### k元多项式定理
$$(x_1+x_2+\cdots+x_k)^N=\sum_{0\leq n_1,\cdots,n_k\leq N且\sum n_i=N}\binom{N}{n_1,n_2,\cdots,n_k}x_1^{n_1}x_2^{n_2}\cdots x_k^{n_k}$$
# 划分问题
## 隔板问题
- 本质：将$n$个无法区分的物品分配到$k$个不同的类别中，其中各类别不可为空
将$n$个相同的小球分为$k$份，每份的小球数不能为0，求可能的方法总数：
考虑将$n$个小球排成一排，在小球的间隔处放置$k-1$个隔板，刚好分成$k$份，实际上就是从$n-1$个间隙中选取$k-1$个用来放隔板的地方
则划分方法数为$$\binom{n-1}{k-1}$$
## 分饼问题
- 也称“星与条”定理
- 本质：将个无法区分的物品分配到$k$个不同的类别中，其中个别类别可能为空
将$n$块相同的饼干分给$p$个人，每个人得到的饼干数可能为0，求可能的方法总数：
考虑增添$p-1$块饼干，将$n+p-1$块饼干排成一排，在$n+p-1$块饼干中选择$p-1$块销毁，把两块靠近的被销毁的饼干之间的饼干分配给一个人，刚好分给$p$个人
可知方法数为$$\binom{n+p-1}{p-1}$$


