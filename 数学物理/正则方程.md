#经典力学 
# Hamilton方程
用Lagrange量来描述力学规律时，使用的变量是广义坐标和广义坐标的一阶导数，即$$\mathcal{L}=\mathcal{L}(q,\dot{q},t)$$实际运用中因为$\dot{q}$会导致方程中出现高阶微分项，给计算带来很大不变，所以我们需要通过[[Legendre变换]]把自变量从$\dot{q}$变成$p$，由此提出了*Hamilton量*，用来代替Lagrange量来描述力学系统的状态。$$H=\sum_{i}p_{i}\dot{q}_{i}-\mathcal{L}$$
从$$\mathrm{d}H=-\sum_{i}\dot{p}_{i}\mathrm{d}q_{i}+\sum_{i}\dot{q}_{i}\mathrm{d}p_{i}$$可以得到$$\dot{q}_{i}=\frac{ \partial  H }{ \partial  p_{i}},\quad \dot{p}_{i}=-\frac{ \partial  H }{ \partial  q_{i}}  ,\quad i=1,2,\dots,s$$这$2s$个方程被称为*正则方程*或Hamilton方程，它与Lagrange方程等价，且更简洁、具有更高的对称性。
基于此，我们可以用[[相空间]]来描述体系的运动过程。
除了$q,\dot{q},p$以外，$\mathcal{L}$和$H$应该还含有各种其他参数$\lambda$（包括时间），它们具有以下关系$$\left( \frac{ \partial  H }{ \partial  \lambda}  \right)_{p,q}=-\left( \frac{ \partial  \mathcal{L} }{ \partial  \lambda}  \right)_{q,\dot{q}}$$
# Poisson括号
设$f(q,p,t)$是某个关于坐标、动量、时间的函数，它对时间的全导数为$$\frac{ \mathrm{d}  f }{ \mathrm{d}  t} =\frac{ \partial  f }{ \partial  t} +\sum_{i}\left( \frac{ \partial  f }{ \partial  q_{i}} \dot{q}_{i}+\frac{ \partial  f }{ \partial  p_{i}} \dot{p}_{i} \right)$$代入正则方程变为$$\frac{ \mathrm{d}  f }{ \mathrm{d}  t}  =\frac{ \partial  f }{ \partial  t} +\sum_{i}\left( \frac{ \partial  H }{ \partial  p_{i}} \frac{ \partial  f }{ \partial  q_{i}} -\frac{ \partial  H }{ \partial  q_{i}} \frac{ \partial  f }{ \partial  p_{i}} \right)=\frac{ \mathrm{d}  f }{ \mathrm{d}  t} +\{ H,f \}$$这里定义$$\{ H,f \}:=\sum_{i}\left( \frac{ \partial  H }{ \partial  p_{i}} \frac{ \partial  f }{ \partial  q_{i}} -\frac{ \partial  H }{ \partial  q_{i}} \frac{ \partial  f }{ \partial  p_{i}} \right)$$这个符号被称为*Poisson括号*。
函数要成为运动积分的条件为$$\frac{ \partial  f }{ \partial  t} +\{ H,f \}=0$$若运动积分不显含时，则$$\{ H,f \}=0$$
此外，可以定义任意两个函数的Poisson括号$$\{ f,g \}:=\sum_{i}\left( \frac{ \partial  f }{ \partial  p_{i}} \frac{ \partial  g }{ \partial  q_{i}} -\frac{ \partial  f }{ \partial  q_{i}} \frac{ \partial  g }{ \partial  p_{i}} \right)$$
Poisson括号的性质有：
- 反对称性：$\{ f,g \}=-\{ g,f \}$。
- 双可加性：$\{ f,g+h \}=\{ f,g \}+\{ f,h \}$，$\{ f+g,h \}=\{ f,g \}+\{ g,h \}$。
- $\{ f,gh \}=g\{ f,h \}+\{ f,g \}h$。
- $\{ fg,h \}=f\{g,h  \}+\{ f,h \}g$。
- Jacobi恒等式：$\{ f,\{ g,h \} \}+\{ g,\{ h,f \} \}+\{ h,\{ f,g \} \}=0$。
# 正则变换
如果直接在原始的坐标$q$和动量$p$下求解正则方程可能会非常麻烦，如果可以将相空间$(q,p)$变换到$(Q,P)$，Hamilton量从$H$变换为$H'$，且正则方程形式上仍为$$\dot{Q}_{i}=\frac{ \partial  H }{ \partial  P_{i}},\quad \dot{Q}_{i}=-\frac{ \partial  H }{ \partial  P_{i}}  ,\quad i=1,2,\dots,s$$这样的变换称为*正则变换*。使用正则变换，那就能将问题大大化简。
一个变换$(q,p)\to(Q,P)$是正则变换的充要条件为$$\{ Q_{i},Q_{j} \}=0,\quad \{ P_{i},P_{j} \}=0,\quad \{ Q_{i},P_{j} \}=\delta_{ij}$$这里的Poisson括号是在旧坐标$(q,p)$下计算的。
正则变换的典型例子有：
- 恒等变换：$Q=q,P=p$。
- 坐标动量交换：$Q=p,P=-q$。
要获得一个正则变换，可以考虑使用生成函数诱导，下面针对1维的情况。如果想要在变换前后的物理规律保持一致，那就应该遵循相同的最小作用量原理$\delta \int \mathcal{L}\mathrm{d}t=0$，那就意味着它们的Lagrange量至多只能相差一个时间全导数$$(p\dot{q}-H)-(P\dot{Q}-H')=\frac{ \mathrm{d}  F }{ \mathrm{d}  t} $$两边乘以$\mathrm{d}t$，得到$$p\mathrm{d}q-P\mathrm{d}Q+(H'-H)\mathrm{d}t=\mathrm{d}F$$一般的变换是会保证$H'=H$，所以我们可以确定一个函数$F(q,Q)$，这个函数就被称为生成函数。
知道了一个生成函数，就可以通过$p=\dfrac{ \partial  F }{ \partial  q},P=-\dfrac{ \partial  F }{ \partial  Q}$得到变换关系式。
此外，还可以通过[[Legendre变换]]得到四种不同的生成函数

|     生成函数     | 微分关系                                         |
| :----------: | -------------------------------------------- |
| $F_{1}(q,Q)$ | $\mathrm{d}F_{1}=p\mathrm{d}q-P\mathrm{d}Q$  |
| $F_{2}(q,P)$ | $\mathrm{d}F_{2}=p\mathrm{d}q+Q\mathrm{d}P$  |
| $F_{3}(p,Q)$ | $\mathrm{d}F_{3}=-q\mathrm{d}p-P\mathrm{d}Q$ |
| $F_{4}(p,P)$ | $\mathrm{d}F_{4}=-q\mathrm{d}p+Q\mathrm{d}P$ |
这和[[热力学状态函数]]形式上完全相同。

